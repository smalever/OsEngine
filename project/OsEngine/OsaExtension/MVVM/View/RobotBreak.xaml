<UserControl x:Class="OsEngine.OsaExtension.MVVM.View.RobotBreak"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:OsEngine.OsaExtension.MVVM.View"
        xmlns:conver="clr-namespace:OsEngine.OsaExtension.MVVM.Converters"
        xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro" 
             xmlns:models="clr-namespace:OsEngine.OsaExtension.MVVM.Models" 
             xmlns:viewmodels="clr-namespace:OsEngine.OsaExtension.MVVM.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewmodels:RobotBreakVM}"
             mc:Ignorable="d" d:DesignWidth="500">
    <UserControl.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="MinWidth" Value="30"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="MinWidth" Value="30"/>
        </Style>
        <conver:ConverterColorToSide  x:Key="ConvertersColorToSide"/>
        <conver:ConverterIsRunToBool x:Key="ConverterIsRunToBool"/>
    </UserControl.Resources>

    <DockPanel>
        <StatusBar DockPanel.Dock="Top" Margin="3">

            <TextBlock Text="Сервер "  Margin="5,3,0,0" FontSize="16"/>
            <TextBlock  Text="{Binding ServerType}" FontSize="16" Height="20"  Margin="3" />

            <Button Content="Выбрать бумагу"
                    ToolTip=" Выбрать / Сменить бумагу"
                    Command="{Binding CommandSelectSecurity}">
            </Button>
            <TextBlock Text="{Binding Header}"  Margin="5" FontSize="16"/>
            <TextBlock Text="Рыночная цена" 
                       Margin="10,3" 
                       FontSize="16"/>
            <TextBlock Text="{Binding Price}" 
                       Margin="5,3,0,0"
                       FontSize="16"/>
            <TextBlock Text=" Статус позиции :" 
                       ToolTip=" Статус позиции"
                       Margin="5,3,0,0"
                       FontSize="16"/>

            <TextBlock FontSize="16"
                       Margin="5,3,0,0">
                <TextBlock.DataContext>
                    <models:PositionBot/>                   
                </TextBlock.DataContext>
                <TextBlock.Text >
                    <Binding Path="Status" />
                </TextBlock.Text>

            </TextBlock>
        </StatusBar>
        <Grid >
            <Grid.RowDefinitions>
                <RowDefinition Height="450" />
                <RowDefinition Height ="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="530"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel  Orientation="Vertical" Margin="1">
                <GroupBox Header="Параметры набора позиции"    
               Grid.Row="0" 
               Margin="1,1,1,1"
               FontSize="18">

                    <UniformGrid Columns="2" 
                                Margin="1"
                                Grid.Row="0"
                                MinWidth="400">

                        <TextBlock Text="Верхняя цена позиции" 
                        ToolTip=" Цена при достиженни которой робот примет действие (ЗАКРЫТИЯ/ ПЕРЕВОРОТ И Т,Д,)"/>
                        <local:DecimalTextBox Text="{Binding TopPositionPrice}" 
                                    Margin="0,2,1,0"/>
                        <Label/>
                        <Label/>

                        <TextBlock Text="Цена большого кластера " />
                        <local:DecimalTextBox   Text="{Binding BigСlusterPrice}" Margin="0,2,1,0"/>

                        <TextBlock Text="Направление сделок"/>
                        <ComboBox ItemsSource="{Binding Directions}"
                       SelectedItem="{Binding Direction}" Margin="0,2,1,0"/>
                        <Label/>
                        <Label/>

                        <TextBlock Text="Нижняя цена набора позиций" 
                        ToolTip=" Тут робот примет действие (ЗАКРЫТИЯ/ ПЕРЕВОРОТ И Т,Д,)"/>
                        <local:DecimalTextBox  Text="{Binding BottomPositionPrice}" Margin="0,2,1,0"/>

                        <Label/>
                        <Label/>

                        <TextBlock Text="Объем для робота $" 
                        ToolTip=" Максимальный объем набираемый роботом на бирже"/>
                        <local:DecimalTextBox  Text="{Binding FullPositionVolume}" Margin="0,2,1,0" />

                        <TextBlock Text="Количество частей входа" />
                        <local:IntTextBox  Text="{Binding PartsPerInput}" Margin="0,2,1,0" />

                        <Label/>
                        <Label/>

                        <!--<TextBlock Text="Тип шага"/>
             <ComboBox ItemsSource="{Binding StepTypes}"
                       SelectedItem="{Binding StepType}"
                       Margin="0,2,1,0"/>-->

                        <TextBlock Text="Расчет цена входа"/>
                        <local:DecimalTextBox Text="{Binding PriceOpenPos}" Margin="0,2,1,0"/>

                    </UniformGrid>
                </GroupBox>
            </StackPanel>
            <Button Grid.Row="1" 
                    Grid.Column ="0"
                    Margin="5"
              Content="{Binding IsRun, Converter={StaticResource ConverterIsRunToBool}}" 
              FontSize="30"
              Command="{Binding CommandStartStop}"
              ToolTip="ПУСК / СТОП робота"
              Height="60" Width="300" 
              VerticalAlignment="Top"
              HorizontalAlignment="Center"
                    />

        </Grid>
    </DockPanel>

</UserControl>
